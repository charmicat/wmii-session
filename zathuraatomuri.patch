--- src/zathura/zathura.c	2011-02-28 23:30:15.566667385 +0100
+++ src/zathuraatomuri/zathura.c	2011-03-04 22:47:19.550000406 +0100
@@ -16,6 +16,8 @@
 
 #include <glib/gstdio.h>
 #include <gtk/gtk.h>
+#include <gdk/gdkx.h>
+#include <X11/Xatom.h>
 #include <gdk/gdkkeysyms.h>
 
 /* macros */
@@ -49,6 +51,8 @@
 #define INDEX      (1 << 2)
 #define NORMAL     (1 << 3)
 
+static Atom atom_uri = NULL;
+
 /* typedefs */
 struct CElement
 {
@@ -696,6 +700,9 @@
 
   Zathura.StdinSupport.file   = NULL;
 
+  atom_uri = XInternAtom(GDK_DISPLAY(),"_URI",False);
+
+
   /* window */
   if(Zathura.UI.embed)
     Zathura.UI.window = gtk_plug_new(Zathura.UI.embed);
@@ -1420,6 +1427,7 @@
   /* set window title */
   gtk_window_set_title(GTK_WINDOW(Zathura.UI.window), basename(file));
 
+
   /* show document */
   set_page(start_page);
   update_status();
@@ -1491,6 +1499,9 @@
   g_free(Zathura.StdinSupport.file);
   Zathura.StdinSupport.file = file;
 
+  XSync(GDK_DISPLAY(), False);
+  XChangeProperty(GDK_DISPLAY(), GDK_WINDOW_XID(Zathura.UI.window->window), atom_uri, XA_STRING, 8, PropModeReplace, (unsigned char *)file,strlen(file) + 1);
+
   return open_file(Zathura.StdinSupport.file, password);
 }
 
